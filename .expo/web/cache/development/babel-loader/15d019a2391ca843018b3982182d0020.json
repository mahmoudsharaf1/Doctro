{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"E:\\\\react-native\\\\Doctro\\\\screen\\\\Search.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { ListItem } from \"react-native-elements\";\nimport _ from 'lodash';\nimport firebase from \"../Firebase\";\n\nvar Search = function (_Component) {\n  _inherits(Search, _Component);\n\n  var _super = _createSuper(Search);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _super.call(this, props);\n    _this.getDataSearch = _.debounce(function () {\n      _this.setState({\n        loading: true\n      });\n\n      var users = firebase.database().ref('specialty').on('child_added', function (res) {\n        res.forEach(function (snapVal) {\n          var data = snapVal.val();\n          var fullData = snapVal.val();\n          console.log(users);\n\n          _this.setState(function (prevState) {\n            return {\n              data: [].concat(_toConsumableArray(prevState.data), [data]),\n              fullData: [].concat(_toConsumableArray(prevState.fullData), [fullData])\n            };\n          });\n        });\n      });\n      fetch(users).then(function (res) {\n        return res.json();\n      }).then(function (resJson) {\n        _this.setState({\n          loading: false,\n          data: resJson,\n          fullData: resJson\n        });\n      }).catch(function (error) {\n        _this.setState({\n          error: error,\n          loading: false\n        });\n      });\n    }, 250);\n\n    _this._renderItem = function (_ref) {\n      var item = _ref.item,\n          index = _ref.index;\n      return React.createElement(TouchableOpacity, {\n        style: {\n          flexDirection: 'row',\n          alignItems: 'center',\n          marginRight: 10\n        },\n        onPress: function onPress() {\n          return _this.props.navigation.navigate('Profile01', item);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 7\n        }\n      }, React.createElement(ListItem, {\n        key: index,\n        leftAvatar: {\n          source: {\n            uri: item.photoURL\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }\n      }, item.displayName), React.createElement(Text, {\n        style: {\n          color: '#999'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }\n      }, item.email)));\n    };\n\n    _this.renderFooter = function () {\n      if (!_this.state.loading) return null;\n      return React.createElement(View, {\n        style: {\n          flex: 1,\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 7\n        }\n      }, React.createElement(ActivityIndicator, {\n        animating: true,\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }\n      }));\n    };\n\n    _this.handleSearch = function (text) {\n      var formattedQuery = text.toLowerCase();\n\n      var data = _.filter(_this.state.fullData, function (uid) {\n        if (uid.displayName.includes(formattedQuery)) {\n          return true;\n        }\n\n        return false;\n      });\n\n      _this.setState({\n        data: data,\n        query: text\n      });\n    };\n\n    _this.state = {\n      data: [],\n      fullData: [],\n      loading: false,\n      error: null,\n      query: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getDataSearch();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: {\n          marginTop: 30,\n          marginHorizontal: 15\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          flexDirection: 'row',\n          alignItems: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }\n      }, React.createElement(TextInput, {\n        placeholderTextColor: \"#888\",\n        placeholder: \"  Search ...\",\n        style: styles.searchInput,\n        onChangeText: this.handleSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }\n      }), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.props.navigation.goBack();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          marginLeft: 5,\n          color: '#999'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 15\n        }\n      }, \"Cancel\"))), React.createElement(FlatList, {\n        data: this.state.data,\n        renderItem: this._renderItem,\n        ListFooterComponent: this.renderFooter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  },\n  searchInput: {\n    backgroundColor: '#eee',\n    padding: 5,\n    borderRadius: 6,\n    width: 280\n  }\n});\nexport default Search;","map":{"version":3,"sources":["E:/react-native/Doctro/screen/Search.js"],"names":["React","Component","ListItem","_","firebase","Search","props","getDataSearch","debounce","setState","loading","users","database","ref","on","res","forEach","snapVal","data","val","fullData","console","log","prevState","fetch","then","json","resJson","catch","error","_renderItem","item","index","flexDirection","alignItems","marginRight","navigation","navigate","source","uri","photoURL","displayName","color","email","renderFooter","state","flex","justifyContent","handleSearch","text","formattedQuery","toLowerCase","filter","uid","includes","query","styles","container","marginTop","marginHorizontal","searchInput","goBack","marginLeft","StyleSheet","create","backgroundColor","padding","borderRadius","width"],"mappings":"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","sourcesContent":["//import liraries\r\nimport React, { Component } from 'react';\r\nimport { View, Text, StyleSheet, TextInput, TouchableOpacity, FlatList, ActivityIndicator } from 'react-native';\r\nimport { ListItem } from \"react-native-elements\";\r\nimport _ from 'lodash';\r\n\r\nimport firebase from '../Firebase';\r\n\r\n// create a component\r\nclass Search extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      data: [],\r\n      fullData: [],\r\n      loading: false,\r\n      error: null,\r\n      query: \"\"\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getDataSearch();\r\n  }\r\n\r\n  getDataSearch = _.debounce(() => {\r\n    this.setState({ loading: true })\r\n    const users = firebase.database().ref('specialty').on('child_added', (res) => {\r\n\r\n      res.forEach((snapVal) => {\r\n        let data = snapVal.val();\r\n        let fullData = snapVal.val();\r\n        console.log(users)\r\n        this.setState((prevState) => {\r\n          return {\r\n            data: [...prevState.data, data],\r\n            fullData: [...prevState.fullData, fullData],\r\n          }\r\n        })\r\n      })\r\n\r\n    });\r\n\r\n    fetch(users).then((res) => res.json())\r\n      .then((resJson) => {\r\n        this.setState({\r\n          loading: false,\r\n          data: resJson,\r\n          fullData: resJson\r\n        })\r\n      }).catch(error => {\r\n        this.setState({ error, loading: false })\r\n      })\r\n\r\n  }, 250)\r\n\r\n\r\n  _renderItem = ({ item, index }) => {\r\n\r\n    return (\r\n      <TouchableOpacity style={{ flexDirection: 'row', alignItems: 'center', marginRight: 10 }} onPress={() => this.props.navigation.navigate('Profile01', item)}>\r\n        <ListItem\r\n          key={index}\r\n          leftAvatar={{ source: { uri: item.photoURL } }}\r\n        />\r\n        <View>\r\n          <Text>{item.displayName}</Text>\r\n          <Text style={{ color: '#999' }}>{item.email}</Text>\r\n        </View>\r\n      </TouchableOpacity>\r\n    )\r\n  }\r\n\r\n\r\n  renderFooter = () => {\r\n    if (!this.state.loading) return null\r\n    return (\r\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n        <ActivityIndicator animating size='large' />\r\n      </View>\r\n    )\r\n  }\r\n\r\n\r\n  handleSearch = (text) => {\r\n    const formattedQuery = text.toLowerCase();\r\n\r\n    const data = _.filter(this.state.fullData, uid => {\r\n      if (uid.displayName.includes(formattedQuery)) {\r\n        return true\r\n      }\r\n      return false\r\n    })\r\n    this.setState({ data, query: text })\r\n  };\r\n\r\n\r\n\r\n  render() {\r\n    return (\r\n      <View style={styles.container}>\r\n        <View style={{ marginTop: 30, marginHorizontal: 15}}>\r\n          <View style={{ flexDirection: 'row', alignItems: 'center' }}>\r\n\r\n            <TextInput\r\n              placeholderTextColor='#888'\r\n              placeholder='  Search ...'\r\n              style={styles.searchInput}\r\n              onChangeText={this.handleSearch}\r\n            />\r\n\r\n            <TouchableOpacity onPress={() => this.props.navigation.goBack()}>\r\n              <Text style={{ marginLeft: 5, color: '#999' }}>Cancel</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n\r\n          <FlatList\r\n            data={this.state.data}\r\n            renderItem={this._renderItem}\r\n            // keyExtractor={(item, index) => index.toString}\r\n            ListFooterComponent={this.renderFooter}\r\n          />\r\n\r\n\r\n        </View>\r\n\r\n      </View>\r\n    );\r\n  }\r\n}\r\n\r\n// define your styles\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff'\r\n  },\r\n  searchInput: {\r\n    backgroundColor: '#eee',\r\n    padding: 5,\r\n    borderRadius: 6,\r\n    width: 280\r\n  },\r\n});\r\n\r\n//make this component available to the app\r\nexport default Search;\r\n"]},"metadata":{},"sourceType":"module"}